setwd("/Users/daisypacheco/Documents/GitHub/MLProject")
original_data <- read_csv('data/paper/fulldata_79.csv')
library(tidyverse)
original_data <- read_csv('data/paper/fulldata_79.csv')
names_dictionary <- read.csv('data/paper/dictionary_79.csv', sep = ";")
cpi <- read_csv('data/paper/CPI.csv')
tidy_data <- original_data %>%
tidyr::pivot_longer(
-c(R0000100, R0214700, R0214800, R0010300),
names_to = "variable_id",
values_to = "value",
values_drop_na = TRUE
) %>%
dplyr::left_join(
names_dictionary
) %>%
dplyr::filter(value >= 0) %>%
dplyr::rename(
id = R0000100,
ethnicity = R0214700,
gender = R0214800,
religion = R0010300
) %>%
dplyr::select(-variable_id, -religion, -ethnicity, -gender)
View(tidy_data)
yearly_variables <- tidy_data %>%
filter(is.na(job_number)) %>%
select(id, year, variable, value) %>%
pivot_wider(
names_from = variable,
values_from = value
) %>%
select(-highest_grade, -urban_rural, -net_family_income,
-military_pay, -sample_id)
View(tidy_data)
